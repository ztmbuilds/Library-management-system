renew-book:
  patch:
    summary: Renew book
    tags:
      - Borrowings
    security:
      - bearerAuth: []
    parameters:
      - name: id
        in: path
        required: true
        description: Borrowing ID
        schema:
          type: string
    requestBody:
      content:
        application/json:
          schema:
            type: object
            properties:
              newReturnDate:
                type: string
                format: 'YYYY-MM-DD'
                example: '2024-09-19'
            required:
              - newReturnDate
    responses:
      200:
        description: Book renewed successfully
      404:
        description: No borrowing record found
      422:
        description: Validation error
      409:
        description: You cannot renew this book because it has existing reservations

return-book:
  patch:
    summary: Return book
    tags:
      - Borrowings
    security:
      - bearerAuth: []
    parameters:
      - name: id
        in: path
        required: true
        description: Borrowing ID
        schema:
          type: string
    responses:
      200:
        description: Book returned successfully
        content:
          application/json:
            schema:
              $ref: '../schemas.yaml#/Borrowing'
      404:
        description: No borrowing record found

report-lost:
  patch:
    summary: Report lost book
    tags:
      - Borrowings
    security:
      - bearerAuth: []
    parameters:
      - name: id
        in: path
        required: true
        description: Borrowing ID
        schema:
          type: string
    requestBody:
      content:
        application/json:
          schema:
            type: object
            properties:
              description:
                type: string
                example: 'Lost the book'
            required:
              - description
    responses:
      $ref: '#/report-damaged/patch/responses'

report-damaged:
  patch:
    summary: Report damaged book
    tags:
      - Borrowings
    security:
      - bearerAuth: []
    parameters:
      - name: id
        in: path
        required: true
        description: Borrowing ID
        schema:
          type: string
    requestBody:
      content:
        application/json:
          schema:
            type: object
            properties:
              description:
                type: string
                example: 'Damaged the book'
    responses:
      200:
        description: success
        content:
          application/json:
            schema:
              allOf:
                - $ref: '../schemas.yaml#/Borrowing'
                - $ref: '../schemas.yaml#/Fine'
      422:
        description: Validation error
      404:
        description: No borrowing record found
